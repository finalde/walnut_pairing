from dataclasses import dataclass
from typing import Tuple
from PIL import Image
from .image_value_object import ImageSideEnum

@dataclass(frozen=True)
class ImageValueObject:
    side: ImageSideEnum
    path: str
    size: Tuple[int, int]
    format: str
    mode: str

    @classmethod
    def from_file(cls, side: ImageSideEnum, path: str) -> "ImageValueObject":
        """Create an immutable ImageValueObject from a file path"""
        with Image.open(path) as img:
            return cls(
                side=side,
                path=path,
                size=img.size,
                format=img.format,
                mode=img.mode
            )
