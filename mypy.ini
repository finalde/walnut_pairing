[mypy]
# Enforce strict optional and type checks
strict = True

# Functions/methods must have type hints
disallow_untyped_defs = True
# Prevent partially typed defs
disallow_incomplete_defs = True
# Calling untyped functions is an error
disallow_untyped_calls = True
# Type check inside untyped functions
check_untyped_defs = True
# Disallow untyped decorators
disallow_untyped_decorators = True
# Disallow any untyped
disallow_any_unimported = True
disallow_any_expr = False  # Allow for gradual typing
disallow_any_decorated = False  # Allow for decorators
disallow_any_explicit = False  # Allow explicit Any
# Warn about unused ignores
warn_unused_ignores = True
# Warn about redundant casts
warn_redundant_casts = True
# Warn about return Any
warn_return_any = True
# Warn about unreachable code
warn_unreachable = True
# Warn about no return
warn_no_return = True
# Show error codes
show_error_codes = True
# Show column numbers
show_column_numbers = True
# Follow imports
follow_imports = normal
# Namespace packages
namespace_packages = True
# Platform
platform = linux

# Path configuration
python_version = 3.12
mypy_path = walnut_pair_backend/src

# Ignore missing stubs for third-party libraries (but still type check usage)
[mypy-torchvision.*]
ignore_missing_imports = True

[mypy-torch.*]
ignore_missing_imports = True

[mypy-psycopg2.*]
ignore_missing_imports = True

[mypy-psycopg2_binary.*]
ignore_missing_imports = True

[mypy-pgvector.*]
ignore_missing_imports = True

[mypy-sqlalchemy.*]
ignore_missing_imports = True

[mypy-dependency_injector.*]
ignore_missing_imports = True

[mypy-asyncpg.*]
ignore_missing_imports = True
